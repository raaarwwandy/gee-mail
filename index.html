<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">

		<link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One" rel="stylesheet">

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

    // FOR LOOP THAT WILL RUN THROUGH DATA SET
	
	 // var counter = document.createElement ('div');
  //   	counter.class = "inBoxCounter";
  //   	counter.innerHTML = geemails.length;
  //   	wrapper.appendChild(counter);

    for( var i = 0; i < geemails.length; i++){

    	// console.log(geemails[i]);

        var counter = document.getElementById('inBoxCounter');
        counter.innerHTML=" Inbox " + "(" + geemails.length + ")";

		var send = document.createElement('div');
    	send.className = "sender";
    	send.innerHTML = geemails[i].sender;
    	wrapper.appendChild(send);

    	var time = document.createElement('div');
    	time.className = "recieveTime";
    	time.innerHTML = geemails[i].date;
    	send.appendChild(time);

    	var subj = document.createElement('div');
    	subj.className = "subjects";
    	subj.innerHTML = geemails[i].subject;
    	time.appendChild(subj);

    	var bod = document.createElement('div');
    	bod.className = "messageBody";
    	bod.innerHTML = geemails[i].body;
    	subj.appendChild(bod);

       
    }

// TOGGLE  
 var content = document.getElementsByClassName("subjects");
            for( var p = 0; p<content.length; p++){
                content[p].addEventListener('click', subBod);
            }

            function subBod(){
                var content = this.querySelectorAll('.messageBody')[0];
                if(content.style.display === 'none'){
                    content.style.display = 'block';
                } else {
                    content.style.display = 'none';
                }
            }

// SETINTERVAL            
function newMail(){

    var newMessage = getNewMessage();

    var send = document.createElement('div');
        send.className = "sender";
        send.innerHTML = newMessage.sender;
        wrapper.appendChild(send);

        var time = document.createElement('div');
        time.className = "recieveTime";
        time.innerHTML = newMessage.date;
        send.appendChild(time);

        var subj = document.createElement('div');
        subj.className = "subjects";
        subj.innerHTML = newMessage.subject;
        time.appendChild(subj);

        var bod = document.createElement('div');
        bod.className = "messageBody";
        bod.innerHTML = newMessage.body;
        subj.appendChild(bod);

// TOGGLE
     var newContent = document.getElementsByClassName("subjects");
                for( var q = 0; q<newContent.length; q++){
                    
                    newContent[q].addEventListener('click', newSubBod);
                }
    console.log(newContent.length);
                function newSubBod(){
                    var newContent = this.querySelectorAll('.messageBody')[0];
                    if(newContent.style.display === 'none'){
                        newContent.style.display = 'block';
                    } else {
                        newContent.style.display = 'none';
                    }
                }
 var counter = document.getElementById('inBoxCounter');
  counter.innerHTML= "Inbox " + "(" + newContent.length++ + ")";     
}



// INTERVAL
setInterval(newMail,6000);

// COUNTER




  
      };
    </script>
	</head>
	<body>
        <!-- header -->
        <header>
        <h1>GEEMAILS</h1>

        </header>


        <!-- body -->
	<div class="container" id="main">
			
			<div id= "inBoxCounter">
                    <ul>
                    <li>Compose Email</li>
                    <li>Drafts</li>
                    <li>Junk</li>
                    <li>Trash</li>
                </ul>        
            </div>
           


			<div id="wrapper"></div>
	</div>

	</body>
</html>